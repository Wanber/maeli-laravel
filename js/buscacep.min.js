$(document).ready(function(){function a(){$("#rua").val("");$("#bairro").val("");$("#cidade").val("")}$("#cep").keyup(function(){$("#bairro").attr("readonly","");$("#rua").attr("readonly");var b=$(this).val().replace(/\D/g,"");if(b!=""){var c=/^[0-9]{8}$/;if(c.test(b)){$("#cep_status").html("<i class='fa fa-spin fa-spinner'></i> Buscando CEP...");$.getJSON("//viacep.com.br/ws/"+b+"/json",function(d){if(!("erro" in d)){$("#rua").val(d.logradouro);$("#bairro").val(d.bairro);$("#cidade").val(d.localidade);if(d.bairro==""){$("#bairro").removeAttr("readonly")}if(d.logradouro==""){$("#rua").removeAttr("readonly")}$("#cep_status").html("")}else{a();$("#cep_status").html("<p class='text-danger'>CEP inválido</p>")}})}else{a()}}else{a();$("#cep_status").html("<p class='text-danger'>CEP inválido</p>")}})});